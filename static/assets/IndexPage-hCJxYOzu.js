import{I as g,J as C,K as s,r as d,o as v,a as p,P as h,R as t,M as a,S as u,Y as y,O as b,B as U}from"./index-CjQmBZNC.js";import{_ as w,U as x,Q,u as k,a as D,b as _,c as m,d as B,e as V,C as q}from"./UsersTable-B0PdvSXZ.js";import{api as P}from"./axios-mghG1tlF.js";import"./format-BpV9CXZR.js";const S={name:"IndexPage",components:{UsersTable:x},setup(){const i=D(),l=k(),n=d(!1),e=d(null),r=d(!1);v(()=>{l.fetchUsers()});const f=o=>{e.value=o,n.value=!0},c=async()=>{r.value=!0;try{await P.post("/make_call",{phone_number:e.value.phone_number}),i.notify({type:"positive",message:`Call to ${e.value.name||e.value.phone_number} completed successfully`}),n.value=!1}catch(o){console.error("Call error:",o),i.notify({type:"negative",message:`Failed to make call: ${o.message}`})}finally{r.value=!1,e.value=null}};return{users:p(()=>l.users),loading:p(()=>l.loading),showCallDialog:n,selectedUser:e,calling:r,callUser:f,makeCall:c}}},I={class:"row items-center justify-between q-mb-md"},M={class:"row q-col-gutter-md"},A={class:"col-12"},N={class:"q-ml-sm"};function j(i,l,n,e,r,f){const c=h("users-table");return C(),g(Q,{padding:""},{default:s(()=>[t("div",I,[l[1]||(l[1]=t("h1",{class:"text-h4 q-my-none"},"Voice Bot Dashboard",-1)),a(u,{color:"primary",icon:"person_add",label:"Manage Users",to:"/users"})]),t("div",M,[t("div",A,[a(_,null,{default:s(()=>[a(m,null,{default:s(()=>l[2]||(l[2]=[t("div",{class:"text-h6"},"Users",-1)])),_:1}),a(m,null,{default:s(()=>[a(c,{users:e.users,loading:e.loading,onCall:e.callUser},null,8,["users","loading","onCall"])]),_:1})]),_:1})])]),a(B,{modelValue:e.showCallDialog,"onUpdate:modelValue":l[0]||(l[0]=o=>e.showCallDialog=o)},{default:s(()=>[a(_,null,{default:s(()=>[a(m,{class:"row items-center"},{default:s(()=>[a(y,{icon:"phone",color:"primary","text-color":"white"}),t("span",N,"Call "+b(e.selectedUser?.name||e.selectedUser?.phone_number)+"?",1)]),_:1}),a(V,{align:"right"},{default:s(()=>[U(a(u,{flat:"",label:"Cancel",color:"primary"},null,512),[[q]]),a(u,{flat:"",label:"Call",color:"primary",onClick:e.makeCall,loading:e.calling},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const R=w(S,[["render",j]]);export{R as default};
